<!-- buy.html -->
{% extends "base.html" %}
{% block title %}Køb aktier{% endblock %}
{% block content %}
<h2>Køb aktier</h2>

<p class="mb-3"><strong>Kontantsaldo:</strong> {{ "%.2f"|format(cash_balance or 0) }} kr</p>

<form method="POST">
  <div class="mb-3">
    <label for="stock_id" class="form-label">Vælg aktie</label>
    <select name="stock_id" id="stock_id" class="form-select" required>
      {% for stock in stocks %}
        <option value="{{ stock.stock_id }}"
          {% if (selected_stock_id|default(None)) == stock.stock_id %}selected{% endif %}>
          {{ stock.name }} ({{ stock.ticker }})
          {% if stock.current_price is not none %} – {{ "%.2f"|format(stock.current_price) }} kr{% endif %}
        </option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-3">
    <label for="quantity" class="form-label">Antal</label>
    <input type="number" id="quantity" name="quantity" class="form-control"
           min="1" value="{{ selected_quantity|default(1, true) }}" required>
  </div>

  {% if selected_price|default(None) %}
    <div class="mb-3 text-muted">
      Senest hentede kurs: {{ "%.2f"|format(selected_price) }} kr
    </div>
  {% endif %}

  <button type="submit" class="btn btn-primary">Køb</button>
</form>
{% endblock %}

